version: '3'

tasks:
  install:
    desc: Install git hooks for package validation
    dir: "{{.USER_WORKING_DIR}}/tooling/hooks"
    cmds:
      - ./install-hooks.sh

  uninstall:
    desc: Uninstall git hooks
    cmds:
      - |
        if [ -f .git/hooks/pre-commit ]; then
          rm .git/hooks/pre-commit
          echo "‚úÖ Git hooks uninstalled"
        else
          echo "‚ÑπÔ∏è  No git hooks found"
        fi

  test:
    desc: Test git hooks without committing
    cmds:
      - |
        echo "üß™ Testing pre-commit hook..."
        if [ -f .git/hooks/pre-commit ]; then
          .git/hooks/pre-commit
        else
          echo "‚ùå No pre-commit hook found. Run 'task hooks:install' first"
          exit 1
        fi
